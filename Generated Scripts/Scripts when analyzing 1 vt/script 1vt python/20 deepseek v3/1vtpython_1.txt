#!/bin/bash
PYTHON_VERSION_INSTALLED=$(python3 --version 2>&1 | awk '{print $2}')
PYTHON_VERSION_FIXED="3.10.15"
if [[ "$(printf '%s\n' "$PYTHON_VERSION_INSTALLED" "$PYTHON_VERSION_FIXED" | sort -V | head -n1)" != "$PYTHON_VERSION_FIXED" ]]; then
    sudo apt-get update
    sudo apt-get install -y software-properties-common
    sudo add-apt-repository -y ppa:deadsnakes/ppa
    sudo apt-get update
    sudo apt-get install -y python3.10=$PYTHON_VERSION_FIXED-* python3.10-dev=$PYTHON_VERSION_FIXED-* python3.10-distutils=$PYTHON_VERSION_FIXED-* python3.10-lib2to3=$PYTHON_VERSION_FIXED-* python3.10-gdbm=$PYTHON_VERSION_FIXED-* python3.10-tk=$PYTHON_VERSION_FIXED-*
    sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 1
    sudo update-alternatives --set python3 /usr/bin/python3.10
    sudo apt-get autoremove -y
    sudo apt-get autoclean -y
fi