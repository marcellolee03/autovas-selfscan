#!/bin/bash
sshd_config="/etc/ssh/sshd_config"
backup_file="/etc/ssh/sshd_config.bak"

cp "$sshd_config" "$backup_file"

sed -i '/^HostKeyAlgorithms/d' "$sshd_config"
echo "HostKeyAlgorithms ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-ed25519-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa" >> "$sshd_config"

systemctl restart sshd