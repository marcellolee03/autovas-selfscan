```bash
#!/bin/bash

# Descrição: Este script hardening tem como objetivo mitigar a vulnerabilidade de transmissão de informações sensíveis em texto claro via HTTP, implementando o redirecionamento para HTTPS e desabilitando o acesso HTTP.
# Ele assume que você está usando o Apache como servidor web.  Adapte-o conforme necessário para outros servidores web.

# Variáveis
HTTP_PORT=80
HTTPS_PORT=443
APACHE_CONFIG_DIR="/etc/apache2/sites-available" # Adaptar para o sistema (ex: /etc/httpd/conf.d)
DEFAULT_SITE="000-default.conf" # Nome do arquivo de configuração do site padrão. Adaptar se necessário.

# 1. Desabilitar o site HTTP padrão
a2dissite 000-default.conf
# 2. Criar arquivo de configuração para redirecionamento HTTP para HTTPS
REDIRECT_FILE="http-redirect.conf"
echo "<VirtualHost *:80>
    ServerName \$(hostname)  # Redireciona para o hostname atual
    Redirect permanent / https://\${SERVER_NAME}/
</VirtualHost>" > "$APACHE_CONFIG_DIR/$REDIRECT_FILE"

# 3. Ativar o site de redirecionamento
a2ensite "$REDIRECT_FILE"

# 4. Verificar se o HTTPS está configurado. Se não, configurar com certificado auto-assinado (para fins de demonstração. Em produção, usar Let's Encrypt ou um certificado válido)
if ! ss -ltn | grep -q ":$HTTPS_PORT"; then
    echo "HTTPS não configurado. Gerando certificado auto-assinado e configurando o site default-ssl."
    apt-get update && apt-get install -y openssl apache2-utils 2>/dev/null # Suprime erros se já instalado
    openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt -subj "/CN=$(hostname)" > /dev/null 2>&1
    DEFAULT_SSL_SITE="default-ssl.conf"
    if [ ! -f "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE" ]; then
        cp /etc/apache2/sites-available/default-ssl.conf.template "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE"  # Para Debian/Ubuntu. Adapte para outros sistemas.
    fi
    sed -i "s,\${APACHE_LOG_DIR}/error.log,\${APACHE_LOG_DIR}/error.log,g" "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE"
    sed -i "s,\${APACHE_LOG_DIR}/access.log,\${APACHE_LOG_DIR}/access.log,g" "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE"
    sed -i "s,/etc/ssl/certs/ssl-cert-snakeoil.pem,/etc/ssl/certs/apache-selfsigned.crt,g" "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE"
    sed -i "s,/etc/ssl/private/ssl-cert-snakeoil.key,/etc/ssl/private/apache-selfsigned.key,g" "$APACHE_CONFIG_DIR/$DEFAULT_SSL_SITE"
    a2enmod ssl
    a2ensite default-ssl.conf
else
    echo "HTTPS já configurado."
fi
# 5. Reiniciar o Apache para aplicar as alterações
systemctl restart apache2

echo "Redirecionamento HTTP para HTTPS configurado.  Acesso HTTP desabilitado.  HTTPS ativado (se já não estava)."
exit 0
```