```bash
#!/bin/bash

# Fix ICMP Timestamp Replies (Vulnerabilidade 3)
if command -v iptables &> /dev/null; then
    iptables -A INPUT -p icmp --icmp-type timestamp-request -j DROP
    iptables -A INPUT -p icmp --icmp-type timestamp-reply -j DROP
    iptables-save > /etc/iptables/rules.v4
    ip6tables-save > /etc/iptables/rules.v6
fi

# Fix TCP Timestamps (Vulnerabilidade 7)
if grep -q "net.ipv4.tcp_timestamps" /etc/sysctl.conf; then
    sed -i 's/^.*net.ipv4.tcp_timestamps.*$/net.ipv4.tcp_timestamps = 0/' /etc/sysctl.conf
else
    echo "net.ipv4.tcp_timestamps = 0" >> /etc/sysctl.conf
fi
sysctl -p

# Configure web servers if present
# For Apache (Vulnerabilidades 1,4,5,6)
if command -v apache2 &> /dev/null; then
    cat > /etc/apache2/conf-available/ssl_hardening.conf << 'EOF'
SSLProtocol TLSv1.2 TLSv1.3
SSLHonorCipherOrder on
SSLCipherSuite "EECDH+AESGCM:EDH+AESGCM"
SSLInsecureRenegotiation off
SSLCompression off
SSLSessionTickets off
EOF
    a2enmod ssl
    a2enconf ssl_hardening >/dev/null
    cat > /etc/apache2/sites-available/000-redirect-http.conf << 'EOF'
<VirtualHost *:80>
    RewriteEngine On
    RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]
</VirtualHost>
EOF
    a2ensite 000-redirect-http.conf >/dev/null
    systemctl restart apache2 >/dev/null
fi

# For Nginx (Vulnerabilidades 1,4,5,6)
if command -v nginx &> /dev/null; then
    cat > /etc/nginx/conf.d/ssl_params << 'EOF'
ssl_protocols TLSv1.2 TLSv1.3;
ssl_prefer_server_ciphers on;
ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM';
ssl_session_tickets off;
ssl_renegotiation off;
EOF
    sed -i '/listen 80;$/i \    return 301 https://$host$request_uri;' /etc/nginx/sites-enabled/* 2>/dev/null
    nginx -t && systemctl restart nginx >/dev/null
fi

# Fix DNS Cache Snooping if BIND installed (Vulnerabilidade 2)
if command -v named &> /dev/null; then
    if grep -q "recursion" /etc/bind/named.conf.options; then
        sed -i 's/recursion .*;/recursion no;/' /etc/bind/named.conf.options
    else
        sed -i '/options {/a \    recursion no;' /etc/bind/named.conf.options
    fi
    systemctl restart bind9 >/dev/null
fi
```