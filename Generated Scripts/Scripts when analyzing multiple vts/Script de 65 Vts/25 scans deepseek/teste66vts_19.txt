#!/bin/bash
# Atualização do Python para versões seguras
sudo apt-get update -y
sudo apt-get install python3.10.15 -y
sudo apt-get install python3.12.6 -y
sudo apt-get install python3.12.8 -y
sudo apt-get install python3.12.9 -y
sudo apt-get install python3.13.2 -y

# Desabilitar TLS 1.0 e TLS 1.1
sudo sed -i 's/TLSv1.0//g' /etc/ssl/openssl.cnf
sudo sed -i 's/TLSv1.1//g' /etc/ssl/openssl.cnf
sudo systemctl restart apache2

# Substituir certificado SSL/TLS
sudo cp /caminho/para/novo/certificado.crt /etc/ssl/certs/
sudo cp /caminho/para/nova/chave.key /etc/ssl/private/
sudo systemctl restart apache2

# Desabilitar MACs fracos no SSH
sudo sed -i 's/^MACs .*/MACs hmac-sha2-256,hmac-sha2-512/' /etc/ssh/sshd_config
sudo systemctl restart sshd

# Desabilitar ICMP Timestamp
sudo sysctl -w net.ipv4.icmp_echo_ignore_all=1
sudo sysctl -p