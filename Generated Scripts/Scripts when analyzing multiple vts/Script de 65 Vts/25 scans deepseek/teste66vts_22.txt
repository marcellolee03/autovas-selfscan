#!/bin/bash
apt-get update
apt-get install -y python3.10=3.10.16-1+b1 python3.12=3.12.9-1+b1
update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 1
update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.12 2
update-alternatives --set python3 /usr/bin/python3.12
sed -i 's/^#Run the App/Run the App/' /etc/ssh/sshd_config
sed -i 's/^MACs /#MACs /' /etc/ssh/sshd_config
echo "MACs hmac-sha2-512,hmac-sha2-256" >> /etc/ssh/sshd_config
systemctl restart sshd
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/localhost.key -out /etc/ssl/certs/localhost.crt -subj "/CN=localhost/O=Luminator/L=Caxias do Sul/ST=RS/C=BR"
sed -i 's/^SSLCertificateFile /#SSLCertificateFile /' /etc/apache2/sites-available/default-ssl.conf
sed -i 's/^SSLCertificateKeyFile /#SSLCertificateKeyFile /' /etc/apache2/sites-available/default-ssl.conf
echo "SSLCertificateFile /etc/ssl/certs/localhost.crt" >> /etc/apache2/sites-available/default-ssl.conf
echo "SSLCertificateKeyFile /etc/ssl/private/localhost.key" >> /etc/apache2/sites-available/default-ssl.conf
systemctl restart apache2